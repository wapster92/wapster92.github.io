(function(t){function e(e){for(var o,s,i=e[0],c=e[1],u=e[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);l&&l(e);while(p.length)p.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(o=!1)}o&&(r.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},a={app:0},r=[];function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},2762:function(t,e,n){"use strict";n("42e5")},"42e5":function(t,e,n){},"524f":function(t,e,n){"use strict";n("78bb")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Categories"),n("BookList")],1)},i=[],c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h3",{staticClass:"title"},[t._v("Категории")]),n("nav",{staticClass:"nav-tags"},[n("ul",{staticClass:"nav-tags__list"},t._l(t.categories,(function(e){return n("li",{staticClass:"nav-tags__item"},[n("a",{staticClass:"nav-tags__link",class:t.addActiveClass(e.id),attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),t.addCat(n,e.id)}}},[t._v(t._s(e.name))])])})),0)])])},u=[],l=(n("c975"),{name:"Categories",methods:{addCat:function(t,e){t.target.classList.toggle("active"),this.$store.commit("RESET"),this.$store.commit("ADD_CHECKEDCAT",e),this.$store.dispatch("GET_BOOKS",{id:[e],page:1})},addActiveClass:function(t){if(this.checkCat.indexOf(t)>=0)return"active"}},computed:{categories:function(){return this.$store.state.categories},checkCat:function(){return this.$store.state.checkedCat}},mounted:function(){this.$store.dispatch("GET_CATEGORIES")}}),d=l,p=(n("8e02"),n("2877")),f=Object(p["a"])(d,c,u,!1,null,null,null),h=f.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h3",{staticClass:"title"},[t._v("Список книг")]),t.checkCat.length<1?n("h2",[t._v("Выберете категорию")]):n("div",{staticClass:"books"},[n("div",{staticClass:"book-list"},t._l(t.books,(function(t){return n("div",{key:t.id,staticClass:"book-list__item"},[n("CardBook",{attrs:{id:t.id,name:t.name,description:t.description,author:t.author,year:t.year,image:t.image,category_id:t.category_id}})],1)})),0),t.next?n("div",{staticClass:"btn-wrap"},[n("button",{staticClass:"btn",on:{click:t.getNextPage}},[t._v("Загрузить еще")])]):t._e()])])},m=[],b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"book-card"},[n("router-link",{attrs:{to:{path:"/book/"+t.id}}},[n("img",{staticClass:"book-card__img",attrs:{src:t.image,alt:t.name}})]),n("h4",{staticClass:"book-card__name"},[n("router-link",{attrs:{to:{path:"/book/"+t.id}}},[t._v(t._s(t.name))])],1),n("p",{staticClass:"book-card__description"},[t._v(t._s(t._f("truncate")(t.description,200,"...")))]),n("span",{staticClass:"book-card__author"},[t._v("Автор: "),n("b",[t._v(t._s(t.author))])]),n("span",{staticClass:"book-card__year"},[t._v("Год: "+t._s(t.year))])],1)])},v=[],k=(n("a9e3"),{name:"Card-book",props:{id:Number,name:String,description:String,author:String,year:String,image:String,category_id:Number},filters:{truncate:function(t,e,n){return t.substring(0,e)+n}}}),g=k,C=(n("2762"),Object(p["a"])(g,b,v,!1,null,null,null)),E=C.exports,O={name:"Book-list",components:{CardBook:E},methods:{getNextPage:function(){this.$store.commit("CHANGE_PAGE"),this.$store.dispatch("GET_BOOKS")}},computed:{books:function(){return this.$store.state.books},checkCat:function(){return this.$store.state.checkedCat},next:function(){return this.$store.state.next}}},y=O,x=(n("524f"),Object(p["a"])(y,_,m,!1,null,null,null)),A=x.exports,S={name:"Home",components:{BookList:A,Categories:h},comments:{Categories:h,BookList:A}},w=S,T=Object(p["a"])(w,s,i,!1,null,"11c38eed",null),$=T.exports,j={data:function(){return{}},components:{Home:$},mounted:function(){}},D=j,G=(n("034f"),Object(p["a"])(D,a,r,!1,null,null,null)),P=G.exports,B=n("8c4f"),N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"book"},[n("img",{staticClass:"book__img",attrs:{src:t.book.image,alt:""}}),n("h4",{staticClass:"book__name"},[t._v(t._s(t.book.name))]),n("p",{staticClass:"book__description"},[t._v(t._s(t.book.description))]),n("h5",[t._v(t._s(t.book.author))]),n("span",[t._v(t._s(t.book.year))])])])},R=[],H=(n("7db0"),{name:"Book",computed:{books:function(){return this.$store.state.books},book:function(){var t=this;return this.books.find((function(e){if(e.id===Number(t.$route.params.id))return e}))}},mounted:function(){}}),I=H,K=Object(p["a"])(I,N,R,!1,null,"2d6d0779",null),L=K.exports;o["a"].use(B["a"]);var M=[{path:"/",name:"Home",component:$},{path:"/book/:id",name:"Book",component:L}],J=new B["a"]({mode:"history",base:"/",routes:M}),X=J,q=(n("4160"),n("a434"),n("159b"),n("96cf"),n("1da1")),z=n("2f62"),F={API:"https://webdev.modumlab.com/api"},Q=n("bc3a"),U=n.n(Q);o["a"].use(z["a"]);var V=new z["a"].Store({state:{categories:[],books:[],checkedCat:[],page:1,next:!1},mutations:{ADD_CATEGORIES:function(t,e){t.categories=e},ADD_BOOKS:function(t,e){e.forEach((function(e){t.books.push(e)}))},ADD_CHECKEDCAT:function(t,e){var n=t.checkedCat.indexOf(e);n<0?t.checkedCat.push(e):t.checkedCat.splice(n,1)},CHANGE_NEXT:function(t,e){t.next=e},CHANGE_PAGE:function(t){t.page++},RESET:function(t){t.books=[],t.page=1}},actions:{GET_CATEGORIES:function(t){return Object(q["a"])(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.prev=1,e.next=4,U.a.post("".concat(F.API,"/book/categories"),{headers:{"Content-Type":"application/json"}});case 4:o=e.sent,n("ADD_CATEGORIES",o.data.data.list),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))()},GET_BOOKS:function(t){return Object(q["a"])(regeneratorRuntime.mark((function e(){var n,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.commit,o=t.state,!(o.checkedCat.length>0)){e.next=13;break}return e.prev=2,e.next=5,U()({method:"POST",url:"".concat(F.API,"/book/list"),headers:{"Content-Type":"application/json"},data:{categories:o.checkedCat,page:o.page}});case 5:a=e.sent,n("ADD_BOOKS",a.data.data.list),n("CHANGE_NEXT",a.data.data.next),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))()}},modules:{}});o["a"].config.productionTip=!1,new o["a"]({router:X,store:V,render:function(t){return t(P)}}).$mount("#app")},"78bb":function(t,e,n){},"7e57":function(t,e,n){},"85ec":function(t,e,n){},"8e02":function(t,e,n){"use strict";n("7e57")}});
//# sourceMappingURL=app.6f2e39da.js.map